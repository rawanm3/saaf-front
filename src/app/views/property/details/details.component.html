<div class="card shadow-lg border-0 rounded-3" *ngIf="property">
  <div class="card-body p-4">

    <ng-container *ngIf="!editMode; else editTemplate">
      <property-info [property]="property"></property-info>
      <div class="mt-2 d-flex gap-2">
        <button type="button" class="btn btn-outline-secondary btn-sm"
          [routerLink]="['/property', property._id, 'cycles']">
          <i class="ri-circle-line"></i> {{ 'PROPERTY.CYCLES' | translate }}
        </button>


      </div>
    </ng-container>

    <ng-template #deleteModal let-modal>
      <div class="modal-header">
        <h5 class="modal-title">{{ 'COMMON.CONFIRM' | translate }}</h5>
        <button type="button" class="btn-close" (click)="modal.dismiss('cancel')"></button>
      </div>
      <div class="modal-body">
        {{ 'PROPERTY.CONFIRM_DELETE_MESSAGE' | translate }}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modal.dismiss('cancel')">
          {{ 'COMMON.CANCEL' | translate }}
        </button>
        <button type="button" class="btn btn-danger" (click)="modal.close('confirm')">
          {{ 'COMMON.DELETE' | translate }}
        </button>
      </div>
    </ng-template>

    <ng-template #editTemplate>
      <form [formGroup]="propertyForm" (ngSubmit)="saveChanges()" class="mt-3">
        <h5 class="fw-semibold mb-3">{{ 'PROPERTY.EDIT_PROPERTY' | translate }}</h5>

        <div class="card border-0 bg-light-subtle mb-3">
          <div class="card-body p-3">
            <h6 class="card-title text-primary mb-3">
              <iconify-icon icon="solar:info-circle-bold-duotone" class="me-2"></iconify-icon>
              {{ 'PROPERTY.SECTION_BASIC_INFO' | translate }}
            </h6>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.NAME' | translate }}</label>
                <input type="text" class="form-control form-control-lg border-2" formControlName="name" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.TYPE' | translate }}</label>
                <select class="form-select form-select-lg border-2" formControlName="type">
                  <option value="">{{ 'PROPERTYADD.SELECT_TYPE' | translate }}</option>
                  <option value="Residential/Commercial Property">{{ 'PROPERTYADD.TYPE_RESIDENTIAL_COMMERCIAL_PROPERTY'
                    | translate }}</option>
                  <option value="Administrative Property (Offices)">{{ 'PROPERTYADD.TYPE_ADMINISTRATIVE_PROPERTY' |
                    translate }}</option>
                  <option value="Residential Complex">{{ 'PROPERTYADD.TYPE_RESIDENTIAL_COMPLEX' | translate }}</option>
                  <option value="Residential/Commercial Complex">{{ 'PROPERTYADD.TYPE_RESIDENTIAL_COMMERCIAL_COMPLEX' |
                    translate }}</option>
                  <option value="Commercial/Administrative Complex">{{
                    'PROPERTYADD.TYPE_COMMERCIAL_ADMINISTRATIVE_COMPLEX' | translate }}</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="card border-0 bg-info-subtle mb-3">
          <div class="card-body p-3">
            <h6 class="card-title text-info mb-3">
              <iconify-icon icon="solar:map-point-bold-duotone" class="me-2"></iconify-icon>
              {{ 'PROPERTY.SECTION_LOCATION_STATUS' | translate }}
            </h6>
            <div class="row g-3">
              <div class="col-md-8">
                <label class="form-label">{{ 'PROPERTY.LOCATION' | translate }}</label>
                <input type="text" class="form-control form-control-lg border-2" formControlName="location" />
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ 'PROPERTY.STATUS' | translate }}</label>
                <select class="form-select form-select-lg border-2 fw-semibold text-capitalize"
                  formControlName="status">
                  <option value="">Select status</option>
                  <option value="available">Available</option>
                  <option value="funded">Funded</option>
                  <option value="matured">Matured</option>
                  <option value="sold">Sold</option>
                  <option value="pending">Pending</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="card border-0 bg-success-subtle mb-3">
          <div class="card-body p-3">
            <h6 class="card-title text-success mb-3">
              <iconify-icon icon="solar:dollar-minimalistic-bold-duotone" class="me-2"></iconify-icon>
              {{ 'PROPERTY.SECTION_PRICE_FEATURES' | translate }}
            </h6>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.TOTAL_VALUE' | translate }} ({{currency}})</label>
                <input type="number" class="form-control form-control-lg border-2 border-success"
                  formControlName="totalValue" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.MIN_INVESTMENT' | translate }} ({{currency}})</label>
                <input type="number" class="form-control form-control-lg border-2" formControlName="minInvestment" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.EXPECTED_NET_YIELD' | translate }}</label>
                <input type="number" class="form-control form-control-lg border-2" formControlName="expectedNetYield" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.EXPECTED_ANNUAL_RETURN' | translate }}</label>
                <input type="number" class="form-control form-control-lg border-2"
                  formControlName="expectedAnnualReturn" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.HOLDING_PERIOD_MONTHS' | translate }}</label>
                <input type="number" class="form-control form-control-lg border-2"
                  formControlName="holdingPeriodMonths" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.TOTAL_SHARES' | translate }}</label>
                <input type="number" class="form-control form-control-lg border-2" formControlName="totalShares" />
              </div>
              <div class="col-md-6">
                <label class="form-label">{{ 'PROPERTY.RENTED' | translate }}</label>
                <select class="form-select form-select-lg border-2" formControlName="isRented">
                  <option [value]="true">{{ 'COMMON.YES' | translate }}</option>
                  <option [value]="false">{{ 'COMMON.NO' | translate }}</option>
                </select>
              </div>
              <div class="col-md-6" *ngIf="propertyForm.get('isRented')?.value">
                <label class="form-label">{{ 'PROPERTY.CURRENT_RENT' | translate }} ({{currency}})</label>
                <input type="number" class="form-control form-control-lg border-2" formControlName="currentRent" />
              </div>
              <div class="col-md-4" *ngIf="propertyForm.get('square')">
                <label class="form-label">{{ 'PROPERTY.SIZE' | translate }} (sq ft)</label>
                <input type="number" class="form-control form-control-lg border-2" formControlName="square" />
              </div>
              <div class="col-md-4" *ngIf="propertyForm.get('numberOfRooms')">
                <label class="form-label">{{ 'PROPERTY.BEDROOMS' | translate }}</label>
                <input type="number" class="form-control form-control-lg border-2" formControlName="numberOfRooms" />
              </div>
              <div class="col-md-4" *ngIf="propertyForm.get('numberOfBathrooms')">
                <label class="form-label">{{ 'PROPERTY.BATHROOMS' | translate }}</label>
                <input type="number" class="form-control form-control-lg border-2"
                  formControlName="numberOfBathrooms" />
              </div>
            </div>
          </div>
        </div>

        <div class="card border-0 bg-warning-subtle">
          <div class="card-body p-3">
            <h6 class="card-title text-warning mb-3">
              <iconify-icon icon="solar:document-text-bold-duotone" class="me-2"></iconify-icon>
              {{ 'PROPERTY.SECTION_DESCRIPTION' | translate }}
            </h6>
            <textarea class="form-control form-control-lg border-2" rows="4" formControlName="description"></textarea>
          </div>
        </div>

        <div class="d-flex gap-2 mt-4">
          <button type="submit" class="btn btn-success btn-sm">
            <i class="ri-save-3-line me-1"></i> {{ 'PROPERTY.SAVE' | translate }}
          </button>
          <button type="button" class="btn btn-secondary btn-sm" (click)="editMode=false">
            <i class="ri-close-circle-line me-1"></i> {{ 'COMMON.CLOSE' | translate }}
          </button>
        </div>
      </form>
    </ng-template>
  </div>
</div>