<div class="card shadow-lg border-0 rounded-3" *ngIf="property">
  <div class="card-body p-4">
    <div class="position-relative mb-3" *ngIf="property.images?.length; else noImage">
      <div id="propertyCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner rounded shadow-sm" style="max-height: 400px; overflow: hidden;">
          <div *ngFor="let img of property.images; let i = index" class="carousel-item" [class.active]="i === 0">
            <img [src]="img" class="d-block w-100 rounded-top"
              style="max-height: 400px; object-fit: contain; background: #f8f9fa;" alt="Property image">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
      </div>
      <span class="position-absolute top-0 start-0 m-3">
        <span class="badge bg-warning text-light px-3 py-2 shadow-sm fs-14">
          {{ property.status || 'For Sale' }}
        </span>
      </span>
    </div>

    <ng-template #noImage>
      <div class="d-flex flex-column justify-content-center align-items-center rounded shadow-sm mb-3 no-image-box">
        <div class="icon-box mb-3">
          <iconify-icon icon="mdi:image-off-outline" class="fs-1 text-primary"></iconify-icon>
        </div>
        <h5 class="fw-semibold text-dark mb-1">{{ 'PROPERTY.NO_IMAGES' | translate }}</h5>
        <p class="text-muted mb-0">{{ 'PROPERTY.NO_IMAGES_DESC' | translate }}</p>
      </div>
    </ng-template>

    <div class="d-flex justify-content-between align-items-start mb-3">
      <div>
        <h3 class="fs-22 fw-bold text-dark mb-1">{{ property.name }}</h3>
        <p class="text-muted mb-0 d-flex align-items-center gap-2">
          <iconify-icon icon="solar:map-point-wave-bold-duotone" class="fs-18 text-primary"></iconify-icon>
          {{ property.location }}
        </p>
      </div>
    </div>

    <div class="mb-3">
      <span class="badge bg-success-subtle text-success px-3 py-2 fs-16 shadow-sm">
        {{ property.totalValue}} {{ 'CURRENCY.' + currency | translate }}
      </span>
    </div>

    <h5 class="fw-semibold text-dark mb-3">{{ 'PROPERTY.PROPERTY_DETAILS' | translate }}</h5>
    <ul class="list-group list-group-flush shadow-sm rounded">
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.TYPE' | translate }}</strong> <span>{{ property.type }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.MIN_INVESTMENT' | translate }}</strong> <span>{{ property.minInvestment}} {{ 'CURRENCY.' +
          currency | translate }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.TOTAL_SHARES' | translate }}</strong> <span>{{ property.totalShares }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.EXPECTED_NET_YIELD' | translate }}</strong> <span>{{ property.expectedNetYield }}%</span>
      </li>
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.EXPECTED_ANNUAL_RETURN' | translate }}</strong> <span>{{ property.expectedAnnualReturn
          }}%</span>
      </li>
      <li class="list-group-item d-flex justify-content-between" *ngIf="property.square">
        <strong>{{ 'PROPERTY.SIZE' | translate }}</strong>
        <span>{{ property.square }} {{ 'PROPERTY.SQ_FT' | translate }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between" *ngIf="property.numberOfRooms">
        <strong>{{ 'PROPERTY.BEDROOMS' | translate }}</strong>
        <span>{{ property.numberOfRooms }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between" *ngIf="property.numberOfBathrooms">
        <strong>{{ 'PROPERTY.BATHROOMS' | translate }}</strong>
        <span>{{ property.numberOfBathrooms }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.HOLDING_PERIOD_MONTHS' | translate }}</strong> <span>{{ property.holdingPeriodMonths }} {{
          'PROPERTY.SQ_FT' | translate }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between">
        <strong>{{ 'PROPERTY.RENTED' | translate }}</strong> <span>{{ property.isRented ? ('COMMON.YES' | translate) :
          ('COMMON.NO' | translate) }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between" *ngIf="property.isRented">
        <strong>{{ 'PROPERTY.CURRENT_RENT' | translate }}</strong> <span>{{ property.currentRent}} {{ 'CURRENCY.' +
          currency | translate }}</span>
      </li>
    </ul>

    <p class="mt-3 text-muted">{{ property.description }}</p>

    <div *ngIf="property.investors?.length">
      <h5 class="fw-semibold text-dark mt-4 mb-3">{{ 'INVESTMENT.INVESTMENT_DETAILS' | translate }}</h5>
      <ul class="list-group list-group-flush shadow-sm rounded">
        <li *ngFor="let inv of property.investors" class="list-group-item d-flex justify-content-between">
          <span>{{ inv.name }}</span>
          <span class="fw-semibold text-success">{{ inv.amount}} {{ 'CURRENCY.' + currency | translate }}</span>
        </li>
      </ul>
    </div>

    <div *ngIf="property.transactions?.length">
      <h5 class="fw-semibold text-dark mt-4 mb-3">{{ 'TRANSACTIONS.TRANSACTIONS' | translate }}</h5>
      <ul class="list-group list-group-flush shadow-sm rounded">
        <li *ngFor="let tx of property.transactions" class="list-group-item d-flex justify-content-between">
          <span>{{ tx.type }} ({{ tx.status }})</span>
          <span class="fw-semibold">{{ tx.amount}} {{ 'CURRENCY.' + currency | translate }}</span>
        </li>
      </ul>
    </div>

    <div *ngIf="property.cycles?.length">
      <h5 class="fw-semibold text-dark mt-4 mb-3">{{ 'PROPERTY.CYCLES' | translate }}</h5>
      <ul class="list-group list-group-flush shadow-sm rounded">
        <li *ngFor="let cycle of property.cycles" class="list-group-item d-flex justify-content-between">
          <span>{{ cycle.period }}</span>
          <span class="fw-semibold text-primary">{{ 'PROPERTY.NET_PROFIT' | translate }}: {{ cycle.netProfit}} {{
            'CURRENCY.' + currency | translate }}</span>
        </li>
      </ul>
    </div>

    <div class="d-flex align-items-center justify-content-between mt-4">
      <a [routerLink]="['/property/list']" class="link-primary fw-medium">
        {{ 'PROPERTY.BACK_TO_LIST' | translate }} <i class="ri-arrow-right-line"></i>
      </a>
      <div>
        <p class="mb-0 d-flex align-items-center gap-1">
          <iconify-icon icon="solar:calendar-date-broken" class="fs-18 text-primary"></iconify-icon>
          {{ currentYear }}
        </p>
      </div>
    </div>
  </div>
</div>